# 总体设计文档

***

## 功能设计
### 注册用户
功能：输入用户名，并将用户保存在用户信息内
### 登录用户
功能：输入用户名，判断用户名在用户信息内是否存在，若存在则成功登录
### 查询图书
功能:根据 ISBN 号、作者名字、关键字、书名中的任意组合进行查询
### 购买图书
功能：根据给定的ISBN号和数量进行购买，并将该书的库存量减少购买的数量
### 进货
功能：给出要购进的书的ISBN号、数量和进货价格，将该书的库存量增加购买的数量
### 图书信息录入
功能：第一次录入一本书时，给出一本书的全部信息，包括ISBN号、书名、作者、关键字、单价，在图书信息中创建该书
### 图书信息修改
功能：每次修改图书信息，给出要修改的部分，修改图书信息
### 创建用户
功能：输入用户名，选择创建顾客还是销售人员，将用户保存在用户信息内
### 查询采购信息
功能：查询某段时间的采购信息（即按照采购顺序输出采购图书的 ISBN 号、数量、单价等）
### 查询销售情况
功能：查询某段时间的销售情况（即按照销售顺序输出售出图书的 ISBN 号、数量、单价等）
### 查询盈利信息
功能：输出该段时间内的收入，支出和利润
### 查看工作情况报告
功能：输出某位销售人员进行的每一次操作类型和操作对象
### 查看系统整体工作日志
功能：输出整个系统所进行的所有操作

***

## 用户交互设计
### 注册用户
格式：register 用户名  
输出：register succeed
### 登录用户
格式：logon 用户名  
输出：logon succeed
### 查询图书
格式：querybook   
查询成功输出：find ISBN 书名 作者 关键字 单价 库存量   
查询失败输出：notfind  
### 购买图书
格式：buybook ISBN 数量  
购买成功输出：buy succeed  
购买失败输出：fail，not enough books 或者 fail，no such book  
### 进货
格式：import ISBN 数量 进货价格   
输出：import succeed
### 图书信息录入
格式：enterbookinf ISBN 书名 作者 关键字 单价 数量  
输出：enterbookinf succeed
### 图书信息修改
格式：revisebookinf 修改部分 修改后内容
输出：revisebookinf succeed
### 用户创建
格式：create 用户名 身份 
输出：create succeed
### 查询采购信息
格式：querybuy  
按照采购顺序输出：buy ISBN 数量 单价
### 查询销售情况
格式：querysell  
按照销售顺序输出：sell ISBN 数量 单价
### 查询盈利信息
格式：queryprofit  
输出：income:收入 outcome:支出 profit:利润
### 查看工作情况报告
格式：view 用户名  
按照操作顺序输出：operate:操作类型 object:对象

***

## 数据库设计
### 图书信息  
储存书的ISBN号（20 个字符，每本正版书都有惟一的标识）、书名（60 个字符）、作者（60 个字符）、关键字（可以有多个，总共不超过 60 个字符）、库存量（整型）、单价（非负实数） 
### 购买信息 
储存所有进货的书的ISBN（20 个字符）、进货价格（非负实数）、数量（整形）
### 销售情况  
储存所有售出书的ISBN（20 个字符）、单价（非负实数）、数量（整形）
### 盈利信息  
储存书店的收入（实数），支出（实数），利润（实数）
### 销售人员工作情况报告
储存每个销售人员的每一次操作类型（枚举型）和操作对象（60个字符）
### 系统整体工作日志
储存该系统的每一次操作类型（枚举型）和操作对象（60个字符）
### 用户信息   
储存所有用户的用户名（20个字符），身份（枚举型）

所有信息用块状链表保存在文件中

***

## 类、结构体设计
### 1、顾客类
可执行函数:查询图书、购买图书
### 2、销售人员类
由顾客类派生  
新增函数：进货、图书信息录入、图书信息修改、用户创建
### 3、店主类
由销售人员类派生  
新增函数：查看购买信息、查看销售情况、查看盈利情况、查看工作情况报告、查看系统整体工作日志